{"ast":null,"code":"function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport { debounce } from \"@patternfly/react-core\";\nimport { Table, TableHeader, TableBody, sortable, SortByDirection, expandable } from \"@patternfly/react-table\";\nimport * as tokensModule from \"@patternfly/react-tokens/dist/esm/componentIndex\";\nimport global_spacer_md from \"@patternfly/react-tokens/dist/esm/global_spacer_md\";\nimport LevelUpAltIcon from \"@patternfly/react-icons/dist/esm/icons/level-up-alt-icon\";\nimport { CSSSearch } from './cssSearch';\nimport \"./cssVariables.css\";\nvar isColorRegex = /^(#|rgb)/;\n\nvar mappingAsList = function mappingAsList(property, values) {\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ws-css-property\"\n  }, /*#__PURE__*/React.createElement(\"span\", null, property)), values.map(function (entry, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      style: {\n        padding: \"4px 0 4px calc(\" + global_spacer_md.value + \" * \" + (index + 3) + \")\"\n      }\n    }, /*#__PURE__*/React.createElement(LevelUpAltIcon, {\n      style: {\n        transform: 'rotate(90deg)'\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        paddingLeft: '16px'\n      }\n    }, entry));\n  }));\n};\n\nvar flattenList = function flattenList(files) {\n  var list = [];\n  files.forEach(function (file) {\n    Object.entries(file).forEach(function (_ref) {\n      var selector = _ref[0],\n          values = _ref[1];\n      Object.entries(values).forEach(function (_ref2) {\n        var key = _ref2[0],\n            val = _ref2[1];\n        list.push({\n          selector: selector,\n          property: val.name,\n          token: key,\n          value: val.value,\n          values: val.values\n        });\n      });\n    });\n  });\n  return list;\n};\n\nexport var CSSVariables = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(CSSVariables, _React$Component);\n\n  function CSSVariables(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this; // Ensure array in case of multiple prefixes\n\n    _defineProperty(_assertThisInitialized(_this), \"getFilteredRows\", function (searchRE) {\n      var filteredRows = [];\n      var rowNumber = -1;\n\n      _this.flatList.forEach(function (row) {\n        var selector = row.selector,\n            property = row.property,\n            token = row.token,\n            value = row.value,\n            values = row.values;\n        var passes = !searchRE || searchRE.test(selector) || searchRE.test(property) || searchRE.test(value) || values && searchRE.test(JSON.stringify(values));\n\n        if (passes) {\n          var rowKey = selector + \"_\" + property;\n          var cells = [].concat(_this.props.hideSelectorColumn ? [] : [selector], [property, /*#__PURE__*/React.createElement(\"div\", {\n            key: rowKey\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            key: rowKey + \"_1\",\n            className: \"pf-l-flex pf-m-space-items-sm\"\n          }, isColorRegex.test(value) && /*#__PURE__*/React.createElement(\"div\", {\n            key: rowKey + \"_2\",\n            className: \"pf-l-flex pf-m-column pf-m-align-self-center\"\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"ws-color-box\",\n            style: {\n              backgroundColor: value\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            key: rowKey + \"_3\",\n            className: \"pf-l-flex pf-m-column pf-m-align-self-center ws-td-text\"\n          }, value)))]);\n          filteredRows.push({\n            isOpen: values ? false : undefined,\n            cells: cells\n          });\n          rowNumber += 1;\n\n          if (values) {\n            filteredRows.push({\n              parent: rowNumber,\n              fullWidth: true,\n              cells: [{\n                title: mappingAsList(property, values)\n              }]\n            });\n            rowNumber += 1;\n          }\n        }\n      });\n\n      return filteredRows;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCollapse\", function (event, rowKey, isOpen) {\n      var rows = _this.state.rows;\n      rows[rowKey].isOpen = isOpen;\n\n      _this.setState({\n        rows: rows\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getDebouncedFilteredRows\", debounce(function (value) {\n      var searchRE = new RegExp(value, \"i\");\n\n      _this.setState({\n        searchRE: searchRE,\n        rows: _this.getFilteredRows(searchRE)\n      });\n    }, 500));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSort\", function (_event, index, direction) {\n      _this.flatList = _this.flatList.sort(function (a, b) {\n        var indexToColMap = {\n          '1': 'selector',\n          '2': 'property',\n          '3': 'value'\n        };\n        var column = indexToColMap[index];\n\n        if (direction === SortByDirection.asc) {\n          return a[column] < b[column] ? -1 : a[column] > b[column] ? 1 : 0;\n        } else {\n          return a[column] > b[column] ? -1 : a[column] < b[column] ? 1 : 0;\n        }\n      });\n\n      _this.setState({\n        sortBy: {\n          index: index,\n          direction: direction\n        },\n        rows: _this.getFilteredRows(_this.state.searchRE)\n      });\n    });\n\n    _this.prefix = typeof props.prefix === \"string\" ? [props.prefix] : props.prefix;\n\n    var prefixTokens = _this.prefix.map(function (prefix) {\n      return prefix.replace(\"pf-\", \"\").replace(/-+/g, \"_\");\n    });\n\n    var applicableFiles = Object.entries(tokensModule).filter(function (_ref3) {\n      var key = _ref3[0],\n          val = _ref3[1];\n      return prefixTokens.includes(key);\n    }).sort(function (_ref4, _ref5) {\n      var key1 = _ref4[0];\n      var key2 = _ref5[0];\n      return key1.localeCompare(key2);\n    }).map(function (_ref6) {\n      var key = _ref6[0],\n          val = _ref6[1];\n\n      if (props.selector) {\n        var _ref7;\n\n        return _ref7 = {}, _ref7[props.selector] = val[props.selector], _ref7;\n      }\n\n      return val;\n    });\n    _this.flatList = flattenList(applicableFiles);\n    _this.columns = [].concat(props.hideSelectorColumn ? [] : [{\n      title: \"Selector\",\n      transforms: [sortable],\n      cellFormatters: [expandable]\n    }], [{\n      title: \"Variable\",\n      transforms: [sortable]\n    }, {\n      title: \"Value\",\n      transforms: [sortable]\n    }]);\n    _this.state = {\n      searchRE: '',\n      rows: _this.getFilteredRows(),\n      sortBy: {\n        index: 0,\n        direction: \"asc\" // a-z\n\n      }\n    };\n    return _this;\n  }\n\n  var _proto = CSSVariables.prototype;\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CSSSearch, {\n      getDebouncedFilteredRows: this.getDebouncedFilteredRows\n    }), /*#__PURE__*/React.createElement(Table, {\n      variant: \"compact\",\n      \"aria-label\": \"CSS Variables for prefixes \" + this.prefix.join(\" \"),\n      sortBy: this.state.sortBy,\n      onSort: this.onSort,\n      cells: this.columns,\n      rows: this.state.rows,\n      onCollapse: this.onCollapse,\n      gridBreakPoint: \"grid-lg\"\n    }, /*#__PURE__*/React.createElement(TableHeader, null), /*#__PURE__*/React.createElement(TableBody, null)));\n  };\n\n  return CSSVariables;\n}(React.Component);","map":{"version":3,"sources":["/Users/ctrowbri/dev/patternfly-quickstarts/node_modules/theme-patternfly-org/components/cssVariables/cssVariables.js"],"names":["React","debounce","Table","TableHeader","TableBody","sortable","SortByDirection","expandable","tokensModule","global_spacer_md","LevelUpAltIcon","CSSSearch","isColorRegex","mappingAsList","property","values","map","entry","index","padding","value","transform","paddingLeft","flattenList","files","list","forEach","file","Object","entries","selector","key","val","push","name","token","CSSVariables","props","searchRE","filteredRows","rowNumber","flatList","row","passes","test","JSON","stringify","rowKey","cells","hideSelectorColumn","backgroundColor","isOpen","undefined","parent","fullWidth","title","event","rows","state","setState","RegExp","getFilteredRows","_event","direction","sort","a","b","indexToColMap","column","asc","sortBy","prefix","prefixTokens","replace","applicableFiles","filter","includes","key1","key2","localeCompare","columns","transforms","cellFormatters","render","getDebouncedFilteredRows","join","onSort","onCollapse","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SACEC,KADF,EAEEC,WAFF,EAGEC,SAHF,EAIEC,QAJF,EAKEC,eALF,EAMEC,UANF,QAOO,yBAPP;AAQA,OAAO,KAAKC,YAAZ,MAA8B,kDAA9B;AACA,OAAOC,gBAAP,MAA6B,oDAA7B;AACA,OAAOC,cAAP,MAA2B,0DAA3B;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,OAAO,oBAAP;AAEA,IAAMC,YAAY,GAAG,UAArB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,QAAD,EAAWC,MAAX;AAAA,sBACpB,8CACE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,kCACGD,QADH,CADF,CADF,EAMGC,MAAM,CAACC,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR;AAAA,wBACV;AACE,MAAA,GAAG,EAAEA,KADP;AAEE,MAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,sBAAoBV,gBAAgB,CAACW,KAArC,YAAgDF,KAAK,GAAG,CAAxD;AADF;AAFT,oBAME,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAE;AAAEG,QAAAA,SAAS,EAAE;AAAb;AAAvB,MANF,eAOE;AAAM,MAAA,KAAK,EAAE;AAAEC,QAAAA,WAAW,EAAE;AAAf;AAAb,OACGL,KADH,CAPF,CADU;AAAA,GAAX,CANH,CADoB;AAAA,CAAtB;;AAuBA,IAAMM,WAAW,GAAG,SAAdA,WAAc,CAAAC,KAAK,EAAI;AAC3B,MAAIC,IAAI,GAAG,EAAX;AACAD,EAAAA,KAAK,CAACE,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpBC,IAAAA,MAAM,CAACC,OAAP,CAAeF,IAAf,EAAqBD,OAArB,CAA6B,gBAAwB;AAAA,UAAtBI,QAAsB;AAAA,UAAZf,MAAY;AACnDa,MAAAA,MAAM,CAACC,OAAP,CAAed,MAAf,EAAuBW,OAAvB,CAA+B,iBAAgB;AAAA,YAAdK,GAAc;AAAA,YAATC,GAAS;AAC7CP,QAAAA,IAAI,CAACQ,IAAL,CAAU;AACRH,UAAAA,QAAQ,EAARA,QADQ;AAERhB,UAAAA,QAAQ,EAAEkB,GAAG,CAACE,IAFN;AAGRC,UAAAA,KAAK,EAAEJ,GAHC;AAIRX,UAAAA,KAAK,EAAEY,GAAG,CAACZ,KAJH;AAKRL,UAAAA,MAAM,EAAEiB,GAAG,CAACjB;AALJ,SAAV;AAOD,OARD;AASD,KAVD;AAWD,GAZD;AAaA,SAAOU,IAAP;AACD,CAhBD;;AAkBA,WAAaW,YAAb;AAAA;;AACE,wBAAYC,KAAZ,EAAmB;AAAA;;AACjB,wCAAMA,KAAN,UADiB,CAEjB;;AAFiB,sEAwCD,UAACC,QAAD,EAAc;AAC9B,UAAIC,YAAY,GAAG,EAAnB;AACA,UAAIC,SAAS,GAAG,CAAC,CAAjB;;AACA,YAAKC,QAAL,CAAcf,OAAd,CAAsB,UAAAgB,GAAG,EAAI;AAC3B,YAAQZ,QAAR,GAAoDY,GAApD,CAAQZ,QAAR;AAAA,YAAkBhB,QAAlB,GAAoD4B,GAApD,CAAkB5B,QAAlB;AAAA,YAA4BqB,KAA5B,GAAoDO,GAApD,CAA4BP,KAA5B;AAAA,YAAmCf,KAAnC,GAAoDsB,GAApD,CAAmCtB,KAAnC;AAAA,YAA0CL,MAA1C,GAAoD2B,GAApD,CAA0C3B,MAA1C;AACA,YAAM4B,MAAM,GACV,CAACL,QAAD,IACAA,QAAQ,CAACM,IAAT,CAAcd,QAAd,CADA,IAEAQ,QAAQ,CAACM,IAAT,CAAc9B,QAAd,CAFA,IAGAwB,QAAQ,CAACM,IAAT,CAAcxB,KAAd,CAHA,IAICL,MAAM,IAAIuB,QAAQ,CAACM,IAAT,CAAcC,IAAI,CAACC,SAAL,CAAe/B,MAAf,CAAd,CALb;;AAMA,YAAI4B,MAAJ,EAAY;AACV,cAAMI,MAAM,GAAMjB,QAAN,SAAkBhB,QAA9B;AACA,cAAMkC,KAAK,aACN,MAAKX,KAAL,CAAWY,kBAAX,GAAgC,EAAhC,GAAqC,CAACnB,QAAD,CAD/B,GAEThB,QAFS,eAGT;AAAK,YAAA,GAAG,EAAEiC;AAAV,0BACE;AACE,YAAA,GAAG,EAAKA,MAAL,OADL;AAEE,YAAA,SAAS,EAAC;AAFZ,aAIGnC,YAAY,CAACgC,IAAb,CAAkBxB,KAAlB,kBACC;AACE,YAAA,GAAG,EAAK2B,MAAL,OADL;AAEE,YAAA,SAAS,EAAC;AAFZ,0BAIE;AACE,YAAA,SAAS,EAAC,cADZ;AAEE,YAAA,KAAK,EAAE;AAAEG,cAAAA,eAAe,EAAE9B;AAAnB;AAFT,YAJF,CALJ,eAeE;AACE,YAAA,GAAG,EAAK2B,MAAL,OADL;AAEE,YAAA,SAAS,EAAC;AAFZ,aAIG3B,KAJH,CAfF,CADF,CAHS,EAAX;AA4BAmB,UAAAA,YAAY,CAACN,IAAb,CAAkB;AAChBkB,YAAAA,MAAM,EAAEpC,MAAM,GAAG,KAAH,GAAWqC,SADT;AAEhBJ,YAAAA,KAAK,EAALA;AAFgB,WAAlB;AAIAR,UAAAA,SAAS,IAAI,CAAb;;AACA,cAAIzB,MAAJ,EAAY;AACVwB,YAAAA,YAAY,CAACN,IAAb,CAAkB;AAChBoB,cAAAA,MAAM,EAAEb,SADQ;AAEhBc,cAAAA,SAAS,EAAE,IAFK;AAGhBN,cAAAA,KAAK,EAAE,CACL;AACEO,gBAAAA,KAAK,EAAE1C,aAAa,CAACC,QAAD,EAAWC,MAAX;AADtB,eADK;AAHS,aAAlB;AASAyB,YAAAA,SAAS,IAAI,CAAb;AACD;AACF;AACF,OAxDD;;AAyDA,aAAOD,YAAP;AACD,KArGkB;;AAAA,iEAuGN,UAACiB,KAAD,EAAQT,MAAR,EAAgBI,MAAhB,EAA2B;AACtC,UAAQM,IAAR,GAAiB,MAAKC,KAAtB,CAAQD,IAAR;AACAA,MAAAA,IAAI,CAACV,MAAD,CAAJ,CAAaI,MAAb,GAAsBA,MAAtB;;AACA,YAAKQ,QAAL,CAAc;AACZF,QAAAA,IAAI,EAAJA;AADY,OAAd;AAGD,KA7GkB;;AAAA,+EA+GQxD,QAAQ,CAAC,UAAAmB,KAAK,EAAI;AAC3C,UAAMkB,QAAQ,GAAG,IAAIsB,MAAJ,CAAWxC,KAAX,EAAkB,GAAlB,CAAjB;;AACA,YAAKuC,QAAL,CAAc;AACZrB,QAAAA,QAAQ,EAARA,QADY;AAEZmB,QAAAA,IAAI,EAAE,MAAKI,eAAL,CAAqBvB,QAArB;AAFM,OAAd;AAID,KANkC,EAMhC,GANgC,CA/GhB;;AAAA,6DAuHV,UAACwB,MAAD,EAAS5C,KAAT,EAAgB6C,SAAhB,EAA8B;AACrC,YAAKtB,QAAL,GAAgB,MAAKA,QAAL,CAAcuB,IAAd,CAAmB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC3C,YAAMC,aAAa,GAAG;AACpB,eAAK,UADe;AAEpB,eAAK,UAFe;AAGpB,eAAK;AAHe,SAAtB;AAKA,YAAMC,MAAM,GAAGD,aAAa,CAACjD,KAAD,CAA5B;;AACA,YAAI6C,SAAS,KAAKzD,eAAe,CAAC+D,GAAlC,EAAuC;AACrC,iBAAOJ,CAAC,CAACG,MAAD,CAAD,GAAYF,CAAC,CAACE,MAAD,CAAb,GAAwB,CAAC,CAAzB,GAA6BH,CAAC,CAACG,MAAD,CAAD,GAAYF,CAAC,CAACE,MAAD,CAAb,GAAwB,CAAxB,GAA4B,CAAhE;AACD,SAFD,MAEO;AACL,iBAAOH,CAAC,CAACG,MAAD,CAAD,GAAYF,CAAC,CAACE,MAAD,CAAb,GAAwB,CAAC,CAAzB,GAA6BH,CAAC,CAACG,MAAD,CAAD,GAAYF,CAAC,CAACE,MAAD,CAAb,GAAwB,CAAxB,GAA4B,CAAhE;AACD;AACF,OAZe,CAAhB;;AAaA,YAAKT,QAAL,CAAc;AACZW,QAAAA,MAAM,EAAE;AACNpD,UAAAA,KAAK,EAALA,KADM;AAEN6C,UAAAA,SAAS,EAATA;AAFM,SADI;AAKZN,QAAAA,IAAI,EAAE,MAAKI,eAAL,CAAqB,MAAKH,KAAL,CAAWpB,QAAhC;AALM,OAAd;AAOD,KA5IkB;;AAGjB,UAAKiC,MAAL,GACE,OAAOlC,KAAK,CAACkC,MAAb,KAAwB,QAAxB,GAAmC,CAAClC,KAAK,CAACkC,MAAP,CAAnC,GAAoDlC,KAAK,CAACkC,MAD5D;;AAEA,QAAMC,YAAY,GAAG,MAAKD,MAAL,CAAYvD,GAAZ,CAAgB,UAAAuD,MAAM;AAAA,aAAIA,MAAM,CAACE,OAAP,CAAe,KAAf,EAAsB,EAAtB,EAA0BA,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,CAAJ;AAAA,KAAtB,CAArB;;AACA,QAAMC,eAAe,GAAG9C,MAAM,CAACC,OAAP,CAAerB,YAAf,EACrBmE,MADqB,CACd;AAAA,UAAE5C,GAAF;AAAA,UAAOC,GAAP;AAAA,aAAgBwC,YAAY,CAACI,QAAb,CAAsB7C,GAAtB,CAAhB;AAAA,KADc,EAErBiC,IAFqB,CAEhB;AAAA,UAAEa,IAAF;AAAA,UAAUC,IAAV;AAAA,aAAoBD,IAAI,CAACE,aAAL,CAAmBD,IAAnB,CAApB;AAAA,KAFgB,EAGrB9D,GAHqB,CAGjB,iBAAgB;AAAA,UAAde,GAAc;AAAA,UAATC,GAAS;;AACnB,UAAIK,KAAK,CAACP,QAAV,EAAoB;AAAA;;AAClB,iCACGO,KAAK,CAACP,QADT,IACoBE,GAAG,CAACK,KAAK,CAACP,QAAP,CADvB;AAGD;;AACD,aAAOE,GAAP;AACD,KAVqB,CAAxB;AAYA,UAAKS,QAAL,GAAgBlB,WAAW,CAACmD,eAAD,CAA3B;AAEA,UAAKM,OAAL,aACK3C,KAAK,CAACY,kBAAN,GAA2B,EAA3B,GAAgC,CAAC;AACjCM,MAAAA,KAAK,EAAE,UAD0B;AAEjC0B,MAAAA,UAAU,EAAE,CAAC5E,QAAD,CAFqB;AAGjC6E,MAAAA,cAAc,EAAE,CAAC3E,UAAD;AAHiB,KAAD,CADrC,GAME;AAAEgD,MAAAA,KAAK,EAAE,UAAT;AAAqB0B,MAAAA,UAAU,EAAE,CAAC5E,QAAD;AAAjC,KANF,EAOE;AAAEkD,MAAAA,KAAK,EAAE,OAAT;AAAkB0B,MAAAA,UAAU,EAAE,CAAC5E,QAAD;AAA9B,KAPF;AAUA,UAAKqD,KAAL,GAAa;AACXpB,MAAAA,QAAQ,EAAE,EADC;AAEXmB,MAAAA,IAAI,EAAE,MAAKI,eAAL,EAFK;AAGXS,MAAAA,MAAM,EAAE;AACNpD,QAAAA,KAAK,EAAE,CADD;AAEN6C,QAAAA,SAAS,EAAE,KAFL,CAEW;;AAFX;AAHG,KAAb;AA9BiB;AAsClB;;AAvCH;;AAAA,SA+IEoB,MA/IF,GA+IE,kBAAS;AACP,wBACE,oBAAC,KAAD,CAAO,QAAP,qBACE,oBAAC,SAAD;AAAW,MAAA,wBAAwB,EAAE,KAAKC;AAA1C,MADF,eAEE,oBAAC,KAAD;AACE,MAAA,OAAO,EAAC,SADV;AAEE,oDAA0C,KAAKb,MAAL,CAAYc,IAAZ,CAAiB,GAAjB,CAF5C;AAGE,MAAA,MAAM,EAAE,KAAK3B,KAAL,CAAWY,MAHrB;AAIE,MAAA,MAAM,EAAE,KAAKgB,MAJf;AAKE,MAAA,KAAK,EAAE,KAAKN,OALd;AAME,MAAA,IAAI,EAAE,KAAKtB,KAAL,CAAWD,IANnB;AAOE,MAAA,UAAU,EAAE,KAAK8B,UAPnB;AAQE,MAAA,cAAc,EAAC;AARjB,oBAUE,oBAAC,WAAD,OAVF,eAWE,oBAAC,SAAD,OAXF,CAFF,CADF;AAkBD,GAlKH;;AAAA;AAAA,EAAkCvF,KAAK,CAACwF,SAAxC","sourcesContent":["import React from \"react\";\nimport { debounce } from \"@patternfly/react-core\";\nimport {\n  Table,\n  TableHeader,\n  TableBody,\n  sortable,\n  SortByDirection,\n  expandable\n} from \"@patternfly/react-table\";\nimport * as tokensModule from \"@patternfly/react-tokens/dist/esm/componentIndex\";\nimport global_spacer_md from \"@patternfly/react-tokens/dist/esm/global_spacer_md\";\nimport LevelUpAltIcon from \"@patternfly/react-icons/dist/esm/icons/level-up-alt-icon\";\nimport { CSSSearch } from './cssSearch';\n\nimport \"./cssVariables.css\";\n\nconst isColorRegex = /^(#|rgb)/;\n\nconst mappingAsList = (property, values) => (\n  <div>\n    <div className=\"ws-css-property\">\n      <span>\n        {property}\n      </span>\n    </div>\n    {values.map((entry, index) => (\n      <div\n        key={index}\n        style={{\n          padding: `4px 0 4px calc(${global_spacer_md.value} * ${index + 3})`\n        }}\n      >\n        <LevelUpAltIcon style={{ transform: 'rotate(90deg)' }} />\n        <span style={{ paddingLeft: '16px' }}>\n          {entry}\n        </span>\n      </div>\n    ))}\n  </div>\n);\n\nconst flattenList = files => {\n  let list = [];\n  files.forEach(file => {\n    Object.entries(file).forEach(([selector, values]) => {\n      Object.entries(values).forEach(([key, val]) => {\n        list.push({\n          selector,\n          property: val.name,\n          token: key,\n          value: val.value,\n          values: val.values\n        });\n      });\n    });\n  });\n  return list;\n};\n\nexport class CSSVariables extends React.Component {\n  constructor(props) {\n    super(props);\n    // Ensure array in case of multiple prefixes\n    this.prefix =\n      typeof props.prefix === \"string\" ? [props.prefix] : props.prefix;\n    const prefixTokens = this.prefix.map(prefix => prefix.replace(\"pf-\", \"\").replace(/-+/g, \"_\"));\n    const applicableFiles = Object.entries(tokensModule)\n      .filter(([key, val]) => prefixTokens.includes(key))\n      .sort(([key1], [key2]) => key1.localeCompare(key2))\n      .map(([key, val]) => {\n        if (props.selector) {\n          return {\n            [props.selector]: val[props.selector]\n          }\n        }\n        return val;\n      });\n\n    this.flatList = flattenList(applicableFiles);\n\n    this.columns = [\n      ...props.hideSelectorColumn ? [] : [{\n         title: \"Selector\",\n         transforms: [sortable],\n         cellFormatters: [expandable]\n      }],\n      { title: \"Variable\", transforms: [sortable] },\n      { title: \"Value\", transforms: [sortable] }\n    ]\n\n    this.state = {\n      searchRE: '',\n      rows: this.getFilteredRows(),\n      sortBy: {\n        index: 0,\n        direction: \"asc\" // a-z\n      }\n    };\n  }\n\n  getFilteredRows = (searchRE) => {\n    let filteredRows = [];\n    let rowNumber = -1;\n    this.flatList.forEach(row => {\n      const { selector, property, token, value, values} = row;\n      const passes =\n        !searchRE ||\n        searchRE.test(selector) ||\n        searchRE.test(property) ||\n        searchRE.test(value) ||\n        (values && searchRE.test(JSON.stringify(values)));\n      if (passes) {\n        const rowKey = `${selector}_${property}`;\n        const cells = [\n          ...this.props.hideSelectorColumn ? [] : [selector],\n          property,\n          <div key={rowKey}>\n            <div\n              key={`${rowKey}_1`}\n              className=\"pf-l-flex pf-m-space-items-sm\"\n            >\n              {isColorRegex.test(value) && (\n                <div\n                  key={`${rowKey}_2`}\n                  className=\"pf-l-flex pf-m-column pf-m-align-self-center\"\n                >\n                  <span\n                    className=\"ws-color-box\"\n                    style={{ backgroundColor: value }}\n                  />\n                </div>\n              )}\n              <div\n                key={`${rowKey}_3`}\n                className=\"pf-l-flex pf-m-column pf-m-align-self-center ws-td-text\"\n              >\n                {value}\n              </div>\n            </div>\n          </div>\n        ];\n        filteredRows.push({\n          isOpen: values ? false : undefined,\n          cells\n        });\n        rowNumber += 1;\n        if (values) {\n          filteredRows.push({\n            parent: rowNumber,\n            fullWidth: true,\n            cells: [\n              {\n                title: mappingAsList(property, values)\n              }\n            ]\n          });\n          rowNumber += 1;\n        }\n      }\n    });\n    return filteredRows;\n  };\n\n  onCollapse = (event, rowKey, isOpen) => {\n    const { rows } = this.state;\n    rows[rowKey].isOpen = isOpen;\n    this.setState({\n      rows\n    });\n  };\n\n  getDebouncedFilteredRows = debounce(value => {\n    const searchRE = new RegExp(value, \"i\");\n    this.setState({\n      searchRE,\n      rows: this.getFilteredRows(searchRE)\n    });\n  }, 500);\n\n  onSort = (_event, index, direction) => {\n    this.flatList = this.flatList.sort((a, b) => {\n      const indexToColMap = {\n        '1': 'selector',\n        '2': 'property',\n        '3': 'value'\n      };\n      const column = indexToColMap[index];\n      if (direction === SortByDirection.asc) {\n        return a[column] < b[column] ? -1 : a[column] > b[column] ? 1 : 0;\n      } else {\n        return a[column] > b[column] ? -1 : a[column] < b[column] ? 1 : 0;\n      }\n    });\n    this.setState({\n      sortBy: {\n        index,\n        direction\n      },\n      rows: this.getFilteredRows(this.state.searchRE)\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <CSSSearch getDebouncedFilteredRows={this.getDebouncedFilteredRows} />\n        <Table\n          variant=\"compact\"\n          aria-label={`CSS Variables for prefixes ${this.prefix.join(\" \")}`}\n          sortBy={this.state.sortBy}\n          onSort={this.onSort}\n          cells={this.columns}\n          rows={this.state.rows}\n          onCollapse={this.onCollapse}\n          gridBreakPoint=\"grid-lg\"\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}